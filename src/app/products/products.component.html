<main class="products">
  <h2>ğŸ¦ Choose Your Flavors</h2>

  <!-- Cart Button -->
  <button class="cart-toggle-btn" (click)="toggleCart()">
    ğŸ›’ Cart ({{ cartCount }})
  </button>

  <!-- Category filter -->
  <div class="filter">
    <label for="category">Filter by category:</label>
    <select id="category" [(ngModel)]="selectedCategory">
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>
  </div>

  <!-- Product cards -->
  <div class="product-list">
    <div class="product" *ngFor="let item of filteredProducts">
      <img [src]="item.image" [alt]="item.name">
      <h3>{{ item.name }}</h3>
      <p>â‚±{{ item.price }}</p>
      <p>Category: {{ item.category }}</p>

      <p *ngIf="item.available; else outStock" style="color: green;">âœ“ Available</p>
      <ng-template #outStock>
        <p style="color: red;">âœ— Out of Stock</p>
      </ng-template>

      <button (click)="addToCart(item)">
        Add to Cart
      </button>
    </div>
  </div>

  <!-- Cart Sidebar -->
  <div class="cart-overlay" *ngIf="cartOpen" (click)="toggleCart()"></div>
  <div class="cart-sidebar" [class.open]="cartOpen">
    <div class="cart-header">
      <h3>ğŸ›’ Your Cart</h3>
      <button class="close-btn" (click)="toggleCart()">âœ•</button>
    </div>

    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of cart; let i = index">
        <img [src]="item.image" [alt]="item.name">
        <div class="cart-item-details">
          <h4>{{ item.name }}</h4>
          <p>â‚±{{ item.price }}</p>
        </div>
        <button class="remove-btn" (click)="removeFromCart(i)">âœ•</button>
      </div>

      <div class="empty-cart" *ngIf="cart.length === 0">
        <p>ğŸ›’ Your cart is empty</p>
        <p>Add some ice cream!</p>
      </div>
    </div>

    <div class="cart-footer" *ngIf="cart.length > 0">
      <div class="cart-total">
        <h3>Total: â‚±{{ totalPrice }}</h3>
      </div>
      <div class="cart-buttons">
        <button class="clear-btn" (click)="clearCart()">Clear Cart</button>
        <button class="checkout-btn" (click)="checkout()">Checkout</button>
      </div>
    </div>
  </div>
</main>